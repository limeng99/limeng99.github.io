I"°+<h3 id="å‰è¨€">å‰è¨€</h3>

<p>é¡¹ç›®æƒ³è¦æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ï¼Œå°±å¿…é¡»äº†è§£å¦‚ä½•åˆ›å»ºCocoaPodsåº“ï¼Œå¦‚ä½•åˆ›å»ºCocoaPodsåº“å‘¢ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥åŠ¨æ‰‹å¼€å§‹ä»å¤´å»ºç«‹å±äºè‡ªå·±çš„CocoaPodsåº“å§ï¼</p>

<h3 id="åˆ›å»ºå…¬æœ‰podåº“">åˆ›å»ºå…¬æœ‰podåº“</h3>

<h4 id="1-æ³¨å†Œcocoapodsè´¦æˆ·ä¿¡æ¯å·²æ³¨å†Œè¿‡è¯·ç•¥è¿‡">1. æ³¨å†ŒCocoaPodsè´¦æˆ·ä¿¡æ¯(<strong>å·²æ³¨å†Œè¿‡è¯·ç•¥è¿‡)</strong></h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// åˆ›å»ºä¸€ä¸ªå¼€æºpodåº“, é¦–å…ˆæˆ‘ä»¬éœ€è¦æ³¨å†ŒCocoaPodsè´¦æˆ·, ä½¿ç”¨trunkæ–¹å¼åœ¨ç»ˆç«¯æ‰§è¡Œ:
$ pod trunk register 'é‚®ç®±åœ°å€' 'ç”¨æˆ·å'  --description=â€˜æè¿°å†…å®¹â€™ --verbose

// å¯ä»¥ä½¿ç”¨GitHubé‚®ç®±å’Œç”¨æˆ·å, ç„¶ååœ¨ä½ çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ç¡®è®¤é‚®ä»¶åœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»é“¾æ¥ç¡®è®¤å³æ³¨å†ŒæˆåŠŸ, 
   æˆåŠŸä¹‹åå¯ä»¥ç»ˆç«¯æ‰§è¡Œ:
$ pod trunk me
</code></pre></div></div>

<h4 id="2-åˆ›å»ºå…±äº«åº“æ–‡ä»¶-ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“">2. åˆ›å»ºå…±äº«åº“æ–‡ä»¶, ä¸Šä¼ åˆ°å…¬æœ‰ä»“åº“</h4>

<p>åœ¨<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fgithub.com%2F">GitHub</a>ä¸Šåˆ›å»ºä¸€ä¸ªå…¬å¼€é¡¹ç›®ï¼Œåˆ›å»ºæŒ‡å— <a href="https://guides.cocoapods.org/making/using-pod-lib-create.html">Using Pod Lib Create</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// å¦‚æœè‡ªå·±æ–°å»ºçš„åº“ï¼Œå¯ä»¥ç”¨ä¸‹é¢ä»£ç åˆ›å»º
$ pod lib create åº“å

é¡¹ç›®ä¸­å¿…é¡»åŒ…å«è¿™å‡ ä¸ªæ–‡ä»¶ï¼š
1. å…±äº«æ–‡ä»¶å¤¹ï¼šæ–‡ä»¶å¤¹å­˜æ”¾ç€ä½ è¦å…±äº«çš„å†…å®¹, ä¹Ÿå°±æ˜¯å…¶ä»–äººpodå¾—åˆ°çš„æ–‡ä»¶, .podspecæ–‡ä»¶ä¸­çš„
   source_fileséœ€è¦æŒ‡å®šæ­¤æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ç±»å‹
2. LICENSEï¼šå¼€æºè®¸å¯è¯ï¼Œé»˜è®¤ä¸€èˆ¬é€‰æ‹©MIT;
3. README.mdï¼šä»“åº“è¯´æ˜
4. åº“æè¿°æ–‡ä»¶.podspecï¼šæœ¬åº“çš„å„é¡¹ä¿¡æ¯æè¿°, éœ€è¦æäº¤ç»™CocoaPods, podé€šè¿‡è¿™ä¸ªæ–‡ä»¶æŸ¥æ‰¾åˆ°ä½ å…±äº«çš„åº“.
</code></pre></div></div>

<p>ç„¶åå¯ä»¥ä½¿ç”¨<a href="https://www.sourcetreeapp.com/">SourceTree</a>ç­‰å·¥å…·ä¸Šä¼ ä½ çš„ä»£ç åˆ°å…¬å…±ä»“åº“, æˆ–ä½¿ç”¨å‘½ä»¤è¡Œä¸Šä¼ ä»£ç åˆ°è¿œç«¯ä»“åº“, å¦‚ä½•æ“ä½œå¯ä»¥ç§»æ­¥:<a href="https://limeng99.club/learning/2019/11/19/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html">Gitå¸¸ç”¨å‘½ä»¤</a>.</p>

<h4 id="3-ç¼–è¾‘podspecæ–‡ä»¶">3. ç¼–è¾‘*.podspecæ–‡ä»¶</h4>

<p><code class="highlighter-rouge">.podspec</code>æ˜¯ç”¨<code class="highlighter-rouge">Ruby</code>çš„é…ç½®æ–‡ä»¶ï¼Œæè¿°ä½ é¡¹ç›®çš„ä¿¡æ¯ï¼Œç°åœ¨åˆ›å»ºåº“åå·²è‡ªåŠ¨ç”Ÿæˆ*.podspecæ–‡ä»¶</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// è‡ªå·±æƒ³è¦åˆ›å»ºpodspecæ–‡ä»¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤
$ pod spec create åº“å
</code></pre></div></div>

<p><code class="highlighter-rouge">.podspec</code>æ–‡ä»¶å†…å®¹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Pod::Spec.new do |s|
  s.name         = "LMBannerView" # é¡¹ç›®åç§°
  s.version      = "0.0.1"        # ç‰ˆæœ¬å· ä¸ ä½ ä»“åº“çš„ æ ‡ç­¾å· å¯¹åº”
  s.summary      = "è½®æ’­å›¾"        # é¡¹ç›®ç®€ä»‹
  s.description  = &lt;&lt;-DESC
  è¿™ä¸­é—´å†™æè¿°å†…å®¹
               DESC
  s.homepage     = "https://github.com/1805441570@qq.com/test" # ä½ çš„ä¸»é¡µ
  s.license      = { :type =&gt; 'MIT', :file =&gt; 'LICENSE' } # å¼€æºè¯ä¹¦
  s.author       = { "limeng" =&gt; "1805441570@qq.com" } # ä½œè€…ä¿¡æ¯
  # ä½ çš„ä»“åº“åœ°å€ï¼Œä¸èƒ½ç”¨SSHåœ°å€
  s.source       = { :git =&gt; "https://github.com/limeng99/LMBannerView", :tag =&gt; "0.0.1"}
  # ä»£ç ä½ç½®ï¼Œ LMBannerView/**/*.{h,m} è¡¨ç¤º ** æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„.hå’Œ.mæ–‡ä»¶
  s.source_files     = "LMBannerView/Classes/*.{h,m}"
  s.requires_arc = true # æ˜¯å¦å¯ç”¨ARC
  s.platform     = :ios, "8.0" # å¹³å°åŠæ”¯æŒçš„æœ€ä½ç‰ˆæœ¬
  s.frameworks = "UIKit", "Foundation" # æ”¯æŒçš„æ¡†æ¶
  # s.dependency "AFNetworking", "~&gt; 2.3" # ä¾èµ–åº“
end
</code></pre></div></div>

<p>éªŒè¯ <code class="highlighter-rouge">.podspec</code> æ–‡ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œ<code class="highlighter-rouge">cd</code> åˆ° <code class="highlighter-rouge">*.podspec</code> æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pod lib lint åº“å.podspec --allow-warnings
ä¾‹å¦‚: $ pod lib lint LMBannerView.podspec --allow-warnings
</code></pre></div></div>

<p>éªŒè¯æˆåŠŸä¼šå‡ºç°ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-&gt; LMBannerView  (0.0.1)

LMBannerView passed validation.
</code></pre></div></div>

<h4 id="4-ç»™ä»“åº“æ‰“tag">4. ç»™ä»“åº“æ‰“Tag</h4>

<p>æ ‡ç­¾ç›¸å½“äºå°†ä½ çš„ä»“åº“çš„ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œç”¨äºç¨³å®šå­˜å‚¨å½“å‰ç‰ˆæœ¬ã€‚æ ‡ç­¾å·ä¸ä½ åœ¨ <code class="highlighter-rouge">s.version = "0.0.1"</code> çš„ç‰ˆæœ¬å·ä¸€è‡´ <code class="highlighter-rouge">0.0.1</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// åˆ›å»ºæ ‡ç­¾
$ git tag -a 0.0.1 -m 'æ ‡ç­¾è¯´æ˜'
// æ¨é€åˆ°è¿œç¨‹
$ git push origin --tags
</code></pre></div></div>

<h4 id="5-å‘å¸ƒ-podspec">5. å‘å¸ƒ *.podspec</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// ä»“åº“ç›®å½•ä¸‹æ‰§è¡Œ
$ pod trunk push LMBannerView.podspec --allow-warnings

å°†ä½ çš„ *.podspec å‘å¸ƒåˆ°å…¬æœ‰çš„ speecs ä¸Šï¼Œè¿™ä¸€æ­¥æ“ä½œåŒ…æ‹¬ï¼š
1. æ›´æ–°æœ¬åœ° podsåº“ ~/.cocoaPods.repo/master
2. éªŒè¯*.podspecæ ¼å¼æ˜¯å¦æ­£ç¡®
3. å°† *.podspec æ–‡ä»¶è½¬æˆ JSON æ ¼å¼
4. å¯¹ master ä»“åº“è¿›è¡Œåˆå¹¶ã€æäº¤
</code></pre></div></div>

<p>æˆåŠŸåä¼šå‡ºç°<code class="highlighter-rouge">Congrats</code>ä¿¡æ¯å¦‚ä¸‹ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>limMac-2:LMBannerView limengmeng$ pod trunk push LMBannerView.podspec --allow-warnings
Updating spec repo `trunk`
Validating podspec
 -&gt; LMBannerView (0.1.3)
    - WARN  | github_sources: Github repositories should end in `.git`.
    - NOTE  | xcodebuild:  note: Using new build system
    - NOTE  | [iOS] xcodebuild:  note: Planning build
    - NOTE  | [iOS] xcodebuild:  note: Constructing build description
    - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (in target 'App' from project 'App')

Updating spec repo `trunk`

--------------------------------------------------------------------------------
 ğŸ‰  Congrats

 ğŸš€  LMBannerView (0.1.3) successfully published
 ğŸ“…  December 6th, 02:40
 ğŸŒ  https://cocoapods.org/pods/LMBannerView
 ğŸ‘  Tell your friends!
--------------------------------------------------------------------------------
</code></pre></div></div>

<h4 id="6-ä½¿ç”¨ä»“åº“">6. ä½¿ç”¨ä»“åº“</h4>

<p>å‘å¸ƒåˆ°Cocoapodsåï¼Œåœ¨ç»ˆç«¯æ›´æ–°æœ¬åœ°podsä»“åº“ä¿¡æ¯</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pod setup
$ pod search LMBannerView

å¦‚æœ`search`å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
[!] Unable to find a pod with name, author, summary, or description matching `LMBannerView`

åˆ é™¤ cocoapods çš„ç´¢å¼•ï¼Œç„¶åé‡æ–° search
$ rm ~/Library/Caches/CocoaPods/search_index.json
$ pod search LMBannerView
ç»ˆç«¯è¾“å‡ºï¼šCreating search index for spec repo 'artsy'.. Done!
ä¼šè§¦å‘cocoapodsé‡æ–°æ‹‰è¿™ä¸ªç´¢å¼•æ–‡ä»¶
</code></pre></div></div>

<h4 id="7-æ›´æ–°ç»´æŠ¤">7. æ›´æ–°ç»´æŠ¤</h4>

<ul>
  <li>æ›´æ–° <code class="highlighter-rouge">*.podspec</code> ä¸­çš„ç‰ˆæœ¬å·</li>
  <li>æ‰“ä¸Šæ ‡ç­¾æ¨é€æµç¨‹</li>
  <li><code class="highlighter-rouge">pod trunk push *.podspec</code> æ¨é€åˆ°<code class="highlighter-rouge">pods</code>ä»“åº“</li>
</ul>

<h4 id="8-é‡åˆ°çš„é—®é¢˜">8. é‡åˆ°çš„é—®é¢˜</h4>

<ul>
  <li>
    <h6 id="error--ios--xcodebuild-returned-an-unsuccessful-exit-code">ERROR | [iOS]  <code class="highlighter-rouge">xcodebuild: Returned an unsuccessful exit code.</code></h6>

    <p><code class="highlighter-rouge">*.podspec</code> æ–‡ä»¶é‡Œé¢è®¾ç½®çš„ <code class="highlighter-rouge">s.ios.deployment_target = '8.0'</code>ï¼Œæœ€ä½æ”¯æŒç‰ˆæœ¬ä¸º <code class="highlighter-rouge">8.0</code>ï¼Œè€Œåœ¨ä»£ç é‡Œé¢ç”¨åˆ° äº† <code class="highlighter-rouge">xib</code>ï¼Œé‡Œé¢å‹¾äº† <code class="highlighter-rouge">Use Safe Area Layout Guides</code>ï¼Œé¡¹ç›®æ”¯æŒæœ€ä½ç‰ˆæœ¬ä¸º <code class="highlighter-rouge">9.0</code>ï¼Œ<code class="highlighter-rouge">Build</code> ä¸ä¼šæŠ¥é”™ï¼Œæ‰§è¡Œ <code class="highlighter-rouge">pod lib lint *.podspec</code> æŠ¥ <code class="highlighter-rouge">xcodebuild: Returned an unsuccessful exit code.</code>ï¼ŒåŸæ¥æ˜¯ <code class="highlighter-rouge">Use Safe Area Layout Guides</code> çš„é—®é¢˜ï¼Œä¿®æ”¹ <code class="highlighter-rouge">*.podspec</code> æ–‡ä»¶ <code class="highlighter-rouge">s.ios.deployment_target = '9.0'</code> ä¿®å¤äº†è¿™ä¸ªé—®é¢˜</p>
  </li>
  <li><code class="highlighter-rouge">xib</code> æŠ¥ <code class="highlighter-rouge">Use Safe Area Layout Guides</code> error
ä¿®æ”¹ <code class="highlighter-rouge">xib</code> çš„ <code class="highlighter-rouge">Builds for</code> é€‰é¡¹ æ”¹ä¸º  <code class="highlighter-rouge">Deployment Target (9.0)</code></li>
</ul>

<h3 id="åˆ›å»ºç§æœ‰åº“">åˆ›å»ºç§æœ‰åº“</h3>

<p>ç§æœ‰Podåº“å’Œå…¬æœ‰Podåº“çš„åˆ›å»ºæ–¹å¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«, ä¸ä¸€æ ·çš„æ˜¯ç®¡ç†ä»–ä»¬çš„spec repoä¸ä¸€æ ·</p>

<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªè·Ÿ<a href="https://github.com/CocoaPods/Specs">CocoaPods/Specs</a>ç±»ä¼¼çš„ä»“åº“æ¥ç®¡ç†å†…éƒ¨åˆ›å»ºçš„Podåº“çš„podspecæ–‡ä»¶, ä¾›å†…éƒ¨äººå‘˜æ›´æ–°å’Œä¾èµ–ä½¿ç”¨å†…éƒ¨Podç»„ä»¶åº“ã€‚
ç§æœ‰repoçš„æ„å»ºå½¢å¼æœ‰ä¸¤ç§, ä¸€ç§æ˜¯ç§æœ‰gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºï¼Œä¸€ç§æ˜¯æœ¬æœºåˆ›å»ºã€‚æœ¬æœºåˆ›å»ºè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£:<a href="https://guides.cocoapods.org/making/private-cocoapods.html">Private Pods</a>.</p>

<p>è¿™é‡Œä»‹ç»çš„æ˜¯åœ¨å…¬å¸å†…éƒ¨æ­å»ºçš„gitæœåŠ¡å™¨ä¸Šé¢åˆ›å»ºæ•´ä¸ªæœåŠ¡çš„æ–¹å¼ã€‚</p>
<h4 id="1-åˆ›å»ºä¸€ä¸ªgitä»“åº“ç”¨æ¥åšå†…éƒ¨ç§æœ‰åº“çš„spec-repo">1. åˆ›å»ºä¸€ä¸ªgitä»“åº“ç”¨æ¥åšå†…éƒ¨ç§æœ‰åº“çš„Spec Repo</h4>

<p>åœ¨ç§æœ‰æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªä»“åº“,ä¸€ä¸ªç”¨æ¥å­˜æ”¾æ‰€æœ‰å…±äº«åº“çš„podspec, è¿™é‡Œåˆ›å»ºå¥½ä¹‹åçš„å†…éƒ¨SSHåè®®åœ°å€æ˜¯:<a href="git@git.xxxx:podspecs/xxx.git">git@git.xxxx:podspecs/xxx.git</a>, åˆ›å»ºçš„ç§æœ‰ä»“åº“ç»™åˆ°çš„http/httpsåœ°å€ä¹Ÿä¸€æ ·.ç»ˆç«¯è¾“å…¥å‘½ä»¤:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pod repo add PodSpec git@git.xxxx:podspecs/xxx.git
</code></pre></div></div>

<p>å°†PodSpecæ·»åŠ åˆ°æœ¬åœ°repo, æ·»åŠ æˆåŠŸåå¯ä»¥åœ¨/.cocoapods/repos/ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å®˜æ–¹çš„specs:masterå’ŒåˆšåˆšåŠ å…¥çš„specs:PodSpec</p>

<h4 id="2-åˆ›å»ºç§æœ‰podç»„ä»¶åº“">2. åˆ›å»ºç§æœ‰Podç»„ä»¶åº“</h4>

<p>è¿™ä¸€æ­¥è·Ÿä¸Šé¢åˆ›å»ºå…±æœ‰podåº“æ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚å³åˆ›å»ºgitå·¥ç¨‹ï¼Œpodspaceæ–‡ä»¶ï¼Œpod lib lint , æ‰“tag ã€‚ä½†ä¸æ˜¯ç”¨trunkæ–¹å¼æäº¤åˆ°masterä¸Š</p>

<h4 id="3-å°†podspecåŠ å…¥ç§æœ‰sepc-repoä¸­">3. å°†podspecåŠ å…¥ç§æœ‰Sepc repoä¸­</h4>

<p>å…¬æœ‰åº“ä½¿ç”¨trunkæ–¹å¼å°†.podspecæ–‡ä»¶å‘å¸ƒåˆ°<a href="https://github.com/CocoaPods/Specs">CocoaPods/Specs</a>, å†…éƒ¨çš„podç»„ä»¶åº“åˆ™æ˜¯æ·»åŠ åˆ°æˆ‘ä»¬ç¬¬ä¸€æ­¥åˆ›å»ºçš„ç§æœ‰Spec repoä¸­å», åœ¨ç»ˆç«¯æ‰§è¡Œ:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

:ET